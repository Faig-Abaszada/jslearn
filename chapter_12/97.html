<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>chapter_12 || Async JavaScript</title>
</head>
<body>




<script>
    // fetch API  return reposne.json filan yaxsidir callback funksiyalardan
    // ama birden cox promise chaining edende cox pis gorunur.
    // buna care olaraq async await ist edeceyik

    // fetch('todos/faik.json').then( response => {
    //     console.log('resolved: ',response);
    //     return  response.json();
    // }).then((data) => {
    //     console.log(data);
    // }).catch( err => {
    //     console.log('rejected: ', err);
    // })

    /*
     - const getTodos = async () => {} - bu asynchrone func adlanir
       bu funskiya icinde ne olmasindan asili olmayaraq  cagrildiginda
       promise return edir.
    */
    // const getTodos = async () => {}
    // console.log(getTodos());

    /*
     - NE vaxtki async await istifade edirik fetch sonunda .then() istifade etmirik
     - evezinde const = response await yaziriq.
     - fetch() promise return edir ve await keyword deyeri deyiskene atmaqda stop edir
     - nevaxtki promise resolved oldu deyer deyiskene atilir.
     - dushune bilerikki getTodos blocking code-dur ama unutmayaqki bunlari biz
     async funksiya icinde teyin edirik ozluyunde bu non blockingdir.
     - ve resonsu consola yazdiq , consolda artiq response object var
     - ama datamiz object icinde yoxdru buna gore .json() ist etmeliyik
     - ve xatirlayaqki .json() metodumuz ozu asyncdir ve ozu promise return edir.
     -
    */
    /*
      ve
     */
    const getTodos = async () => {
        const response = await fetch('todos/faik.json');
        // console.log(response);

        /*
         - json qarshisinada await yazdiq cunki ne vaxt
          promise resolved oldu onda deyiskene atsin
         - data-ni return etmek ucun return data deyirik ve funskiyadan kenar
         then .catch islerini gorub datani elde edirik
         */

        /*
          - bunlar sayesinde defelerle fetch etsekde biri bitmemish digerine kecmir
         biri bitir digeri baslayir blockin code sheklinde  ve bu hal cox yaxsidir
          - ama cagrildiginda artiq non blocking dir funskiyamiz
         */
        // const response = await fetch('todos/faik.json');
        // const data =  await response.json();
        // const response = await fetch('todos/faik.json');
        // const data =  await response.json();

        const data =  await response.json();
        return data;
    }
    // const test = getTodos();
    // console.log(test);

    /*
     - nevaxtki biz getTodos-u cagiranda biz data-ni almiriq
     - cunki async promise return edir. consola cagirib yazsaq promise
     verdiyini gorerik. cunki resolve  ve reject olunmasi ucun vaxt aparacaq.
     -
    */
    // getTodos();
    const test = getTodos();
    console.log(test);
</script>
</body>
</html>
